import{_ as s,c as a,o as n,a as e}from"./app.f5729140.js";const h=JSON.parse('{"title":"Cypress Plugin","description":"","frontmatter":{},"headers":[{"level":2,"title":"Installation","slug":"installation","link":"#installation","children":[]},{"level":2,"title":"Configuration","slug":"configuration","link":"#configuration","children":[]},{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[]}],"relativePath":"guide/plugin/cypress.md"}'),o={name:"guide/plugin/cypress.md"},l=e(`<h1 id="cypress-plugin" tabindex="-1">Cypress Plugin <a class="header-anchor" href="#cypress-plugin" aria-hidden="true">#</a></h1><p>If you don&#39;t want to use <strong>Kayak</strong> as an all-in-one solution, you can integrate it as a plugin for your existing <strong>Cypress</strong> setup.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FFA657;">npm</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">install</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">-D</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">@kayak/cypress</span></span>
<span class="line"></span></code></pre></div><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-hidden="true">#</a></h2><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-9RAYf" id="tab-ZHhBnpv" checked="checked"><label for="tab-ZHhBnpv">cypress.config.js</label><input type="radio" name="group-9RAYf" id="tab-bOM-vEi"><label for="tab-bOM-vEi">cypress.config.ts</label></div><div class="blocks"><div class="language-javascript active"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> { </span><span style="color:#79C0FF;">configureMetamask</span><span style="color:#C9D1D9;"> } </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">require</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;@kayak/cypress&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF;">module</span><span style="color:#C9D1D9;">.</span><span style="color:#79C0FF;">exports</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">setupNodeEvents</span><span style="color:#C9D1D9;">(</span><span style="color:#FFA657;">on</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">config</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">configureMetamask</span><span style="color:#C9D1D9;">(on)</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">// ... other plugins</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { configureMetamask } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@kayak/cypress&#39;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { defineConfig } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;cypress&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#D2A8FF;">defineConfig</span><span style="color:#FFA657;">({</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">setupNodeEvents</span><span style="color:#FFA657;">(on, config) </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">configureMetamask</span><span style="color:#C9D1D9;">(on)</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">// ... other plugins</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">})</span></span>
<span class="line"></span></code></pre></div></div></div><p>After that, add <strong>Kayak</strong> commands to <strong>Cypress</strong> e2e configuration:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-AGP_3" id="tab-Hbth9rX" checked="checked"><label for="tab-Hbth9rX">cypress/support/e2e.js</label><input type="radio" name="group-AGP_3" id="tab-GAnoE6i"><label for="tab-GAnoE6i">cypress/support/e2e.ts</label></div><div class="blocks"><div class="language-javascript active"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark has-highlighted-lines"><code><span class="line"><span style="color:#D2A8FF;">require</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;@kayak/cypress/commands&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line highlighted"><span style="color:#8B949E;">// ... other commands</span></span>
<span class="line"></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark has-highlighted-lines"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@kayak/cypress/commands&#39;</span></span>
<span class="line highlighted"><span style="color:#8B949E;">// ... other commands</span></span>
<span class="line"></span></code></pre></div></div></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h2><p>There are some limitations to use <strong>Cypress</strong> with <strong>Kayak</strong>:</p><ol><li>You must use <code>chrome</code> or <code>chromium</code> browsers.</li><li>You must use <code>--headed</code> mode.</li><li><code>open</code> mode is not supported.</li></ol><p>Therefore, the start command will look like this:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#FFA657;">cypress</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">run</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">--browser</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">chrome</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">--headed</span></span>
<span class="line"></span></code></pre></div><p>Also, you need to set the following environment variables:</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>CYPRESS_REMOTE_DEBUGGING_PORT</code></td><td>Port for remote debugging. It is necessary to configure <strong>Metamask</strong>.</td></tr><tr><td><code>TMP_DIR</code></td><td>Path to the temporary directory where <strong>Metamask</strong> extension will be downloaded.</td></tr><tr><td><code>SEED_PHRASE</code></td><td>Seed phrase for <strong>Metamask</strong>.</td></tr><tr><td><code>PASSWORD</code></td><td>Password for <strong>Metamask</strong>.</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Please note that it is not enough to put these variables in the <code>.env</code> file in the root of your project. You need to set them in the environment where <strong>Cypress</strong> is executing.</p><p>For example, you can use the <a href="https://www.npmjs.com/package/env-cmd" target="_blank" rel="noreferrer">env-cmd</a> package.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-wht5F" id="tab-L1Arew_" checked="checked"><label for="tab-L1Arew_">package.json</label></div><div class="blocks"><div class="language-json active"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">&quot;scripts&quot;</span><span style="color:#C9D1D9;">: {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">&quot;test:e2e&quot;</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">&quot;env-cmd -f .env cypress run --browser chrome --headed&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre></div></div></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can have a look at the <a href="https://github.com/xyz27900/kayak/tree/main/examples/cypress-plugin" target="_blank" rel="noreferrer">example project</a> to see how it works.</p></div>`,17),t=[l];function p(c,r,i,d,y,u){return n(),a("div",null,t)}const D=s(o,[["render",p]]);export{h as __pageData,D as default};
